!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t,s,r){let{data:i,handleDeleteCard:n,handleCardClick:o,handleLikeButton:a}=t;e(this,"_renderLikes",(()=>{this._element.querySelector(".cards__like-count").textContent=this._likes.length,this.isLiked()?this._cardLikeButton.classList.add(this._cardLikeActiveSelector):this._cardLikeButton.classList.remove(this._cardLikeActiveSelector)})),e(this,"getCardElement",(()=>(this._element=this._getCardTemplate(),this._imageElement=this._element.querySelector(this._imageElSelector),this._imageElement.style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".cards__title").textContent=this._name,this._addEventListeners(),this._ownerId!==this._userId&&(this._cardDeleteButton.style.display="none"),this._renderLikes(),this._element))),this._name=i.name,this._link=i.link,this._likes=i.likes,this._handleCardClick=o,this._handleLikeButton=a,this._handleDeleteCard=n,this._id=i._id,this._cardSelector=s.cardSelector,this._cardLikeSelector=s.cardLikeSelector,this._cardLikeActiveSelector=s.cardLikeActiveSelector,this._cardDeleteSelector=s.cardDeleteSelector,this._imageElSelector=s.imageElSelector,this._userId=r,this._ownerId=i.owner._id,this._cardsTemplate=s.cardsTemplate,this._cardsTemplateSelector=s.cardsTemplateSelector,this._cardsTemplate=document.querySelector(this._cardsTemplateSelector)}_getCardTemplate(){return this._cardsTemplate.content.querySelector(this._cardSelector).cloneNode(!0)}isLiked(){return this._likes.some((e=>e._id===this._userId))}removeCard(){this._element.remove(),this._element=null}likeCard(e){this._likes=e,this._renderLikes()}_addEventListeners(){this._cardLikeButton=this._element.querySelector(this._cardLikeSelector),this._cardDeleteButton=this._element.querySelector(this._cardDeleteSelector),this._cardLikeButton.addEventListener("click",(()=>this._handleLikeButton(this._id))),this._cardDeleteButton.addEventListener("click",(()=>this._handleDeleteCard(this._id))),this._imageElement.addEventListener("click",(()=>{this._handleCardClick()}))}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e,t){s(this,"_showInputError",((e,t)=>{const s=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)})),s(this,"_hideError",(e=>{const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)})),s(this,"_checkValidity",(e=>{e.validity.valid?this._hideError(e):this._showInputError(e,e.validationMessage)})),s(this,"_setEventListeners",(()=>{this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this._toggleButtonState()}))}))})),s(this,"_checkIfFormValid",(()=>this._inputElements.every((e=>e.validity.valid)))),s(this,"_toggleButtonState",(()=>{this._checkIfFormValid()?(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1):(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0)})),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideError(e)}))}enableValidation(){this._formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}}class i{constructor(e){var t,s;s=e=>{e.preventDefault(),"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popupElement=document.querySelector(e)}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("button_type_close"))&&this.close()}))}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}}class n extends i{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t}_getInputValues(){const e=[...this._popupForm.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const a=document.querySelector(".popup__form_type_profile"),l=document.querySelector(".popup__form_type_add-card"),c=document.querySelector(".popup__form_type_avatar"),h=document.querySelector(".popup__input_description_name"),d=document.querySelector(".popup__input_description_job"),_=document.querySelector(".popup__input_avatarlink"),u=document.querySelector(".button_type_edit"),p=document.querySelector(".button_type_add"),m=document.querySelector(".profile__image-update-icon"),S={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".button_type_submit",inactiveButtonClass:"button_type_submit-disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},v=(e,t)=>{e.querySelector(".button_type_submit").textContent=t},E=new class{constructor(e){o(this,"_checkResStatus",(e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))),o(this,"getInitialCards",(()=>fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResStatus))),o(this,"getUserInfo",(()=>fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResStatus))),o(this,"updateUserInfo",(e=>fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResStatus))),o(this,"editUserAvatar",(e=>fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResStatus))),o(this,"addNewCard",(e=>fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResStatus))),o(this,"deleteCard",(e=>fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResStatus))),o(this,"likeCard",(e=>fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResStatus))),o(this,"unLikeCard",(e=>fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResStatus))),this._baseUrl=e.baseUrl,this._headers=e.headers}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"a68c011d-d292-456c-86c3-53eebc4a76ba","Content-Type":"application/json"}}),b=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:s,profileImageSelector:r}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s),this._profileImage=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent,avatarlink:this._profileImage.src}}setUserInfo(e){let{name:t,job:s,avatarlink:r}=e;this._profileName.textContent=t,this._profileJob.textContent=s,this._profileImage.src=r}}({profileNameSelector:".profile__name",profileJobSelector:".profile__job",profileImageSelector:".profile__image"});let f;Promise.all([E.getInitialCards(),E.getUserInfo()]).then((e=>{let[t,s]=e;f=s._id,k.render(t),b.setUserInfo({name:s.name,job:s.about,avatarlink:s.avatar})})).catch((e=>console.log("Error.....: ".concat(e))));const k=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}render(e){e.forEach(this._renderer)}prependItem(e){this._container.prepend(e)}addItem(e){this._container.append(e)}}({renderer:e=>{k.addItem(C(e))}},".cards__list"),y=new class extends i{open(e){let{name:t,link:s}=e;this._popupElement.querySelector(".popup__caption").textContent=t,this._popupElement.querySelector(".popup__preview-image").src=s,this._popupElement.querySelector(".popup__preview-image").alt=t,super.open()}}(".popup_type_preview"),L=new class extends i{setAction(e){this._handleSubmit=e}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()})),super.setEventListeners()}}(".popup_type_delete-card");function C(e){const s=new t({data:e,handleCardClick:()=>{y.open(e)},handleLikeButton:e=>{s.isLiked()?E.unLikeCard(e).then((e=>{s.likeCard(e.likes)})).catch((e=>console.log("Error.....: ".concat(e)))):E.likeCard(e).then((e=>{s.likeCard(e.likes)})).catch((e=>console.log("Error.....: ".concat(e))))},handleDeleteCard:e=>{L.open(),L.setAction((()=>{E.deleteCard(e).then((()=>{s.removeCard(),L.close()})).catch((e=>console.log("Error.....: ".concat(e))))}))}},{cardsTemplateSelector:"#cards-template",cardSelector:".cards__card",imageElSelector:".cards__image",cardLikeSelector:".button_style_like",cardLikeActiveSelector:"button_style_full",cardDeleteSelector:".button_type_delete"},f);return s.getCardElement()}const g=new n(".popup_type_avatar",(e=>{let{avatarlink:t}=e;v(c,"Saving..."),E.editUserAvatar({avatar:t}).then((e=>{b.setUserInfo({name:e.name,job:e.about,avatarlink:e.avatar}),g.close()})).catch((e=>console.log("Error.....: ".concat(e)))).finally((()=>v(c,"Save")))})),I=new n(".popup_type_profile",(e=>{let{name:t,job:s}=e;v(a,"Saving..."),E.updateUserInfo({name:t,about:s}).then((e=>{b.setUserInfo({name:e.name,job:e.about,avatarlink:e.avatar}),I.close()})).catch((e=>console.log("Error.....: ".concat(e)))).finally((()=>v(a,"Save")))})),q=new n(".popup_type_add-card",(e=>{let{nameInput:t,linkInput:s}=e;v(l,"Saving..."),E.addNewCard({name:t,link:s}).then((e=>{k.prependItem(C(e)),q.close()})).catch((e=>console.log("Error.....: ".concat(e)))).finally((()=>v(l,"Create")))}));q.setEventListeners(),L.setEventListeners(),I.setEventListeners(),g.setEventListeners(),y.setEventListeners();const w=new r(S,c),U=new r(S,a),B=new r(S,l);w.enableValidation(),U.enableValidation(),B.enableValidation(),m.addEventListener("click",(()=>{w.resetValidation(),g.open();const e=b.getUserInfo();_.value=e.avatarlink})),p.addEventListener("click",(()=>{B.resetValidation(),q.open()})),u.addEventListener("click",(()=>{U.resetValidation(),I.open();const e=b.getUserInfo();h.value=e.name,d.value=e.job}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9DLFFBQVFDLElBQVIsc0JBQTJCRixNQUN4QzRCLFNBQVEsSUFBTXpFLEVBQWlCUixFQUFhLGVBNkNqRG9GLEVBQWF0RyxvQkFDYndGLEVBQWF4RixvQkFDYm9HLEVBQVVwRyxvQkFDVmdHLEVBQWdCaEcsb0JBQ2hCc0YsRUFBV3RGLG9CQUVYLE1BQU15RyxFQUFzQixJQUFJdkosRUFBYzVELEVBQVU2SCxHQUNsRHVGLEVBQW9CLElBQUl4SixFQUFjNUQsRUFBVTJILEdBQ2hEMEYsRUFBdUIsSUFBSXpKLEVBQWM1RCxFQUFVNEgsR0FFekR1RixFQUFvQm5ILG1CQUNwQm9ILEVBQWtCcEgsbUJBQ2xCcUgsRUFBcUJySCxtQkFFckJtQyxFQUFpQnhFLGlCQUFpQixTQUFTLEtBQ3pDd0osRUFBb0JwSCxrQkFDcEIyRyxFQUFnQjdGLE9BQ2hCLE1BQU0zRyxFQUFPMEosRUFBU08sY0FFdEJuQyxFQUFZUCxNQUFRdkgsRUFBS21LLGNBRzNCbkMsRUFBY3ZFLGlCQUFpQixTQUFTLEtBQ3RDMEosRUFBcUJ0SCxrQkFDckJpSCxFQUFhbkcsVUFHZm9CLEVBQWtCdEUsaUJBQWlCLFNBQVMsS0FDMUN5SixFQUFrQnJILGtCQUNsQitHLEVBQVVqRyxPQUNWLE1BQU0zRyxFQUFPMEosRUFBU08sY0FFdEJyQyxFQUFVTCxNQUFRdkgsRUFBSzZCLEtBQ3ZCZ0csRUFBU04sTUFBUXZILEVBQUtrSyxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlRGVsZXRlQ2FyZCwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVMaWtlQnV0dG9uIH0sIHNldHRpbmdzLCB1c2VySWQpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24gPSBoYW5kbGVMaWtlQnV0dG9uO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG5cclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IHNldHRpbmdzLmNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NhcmRMaWtlU2VsZWN0b3IgPSBzZXR0aW5ncy5jYXJkTGlrZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fY2FyZExpa2VBY3RpdmVTZWxlY3RvciA9IHNldHRpbmdzLmNhcmRMaWtlQWN0aXZlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlU2VsZWN0b3IgPSBzZXR0aW5ncy5jYXJkRGVsZXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbWFnZUVsU2VsZWN0b3IgPSBzZXR0aW5ncy5pbWFnZUVsU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG5cclxuICAgIHRoaXMuX2NhcmRzVGVtcGxhdGUgPSBzZXR0aW5ncy5jYXJkc1RlbXBsYXRlO1xyXG4gICAgdGhpcy5fY2FyZHNUZW1wbGF0ZVNlbGVjdG9yID0gc2V0dGluZ3MuY2FyZHNUZW1wbGF0ZVNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuX2NhcmRzVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRzVGVtcGxhdGVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfZ2V0Q2FyZFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRzVGVtcGxhdGUuY29udGVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChwZXJzb24pID0+IHBlcnNvbi5faWQgPT09IHRoaXMuX3VzZXJJZClcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbGlrZXNDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saWtlLWNvdW50XCIpO1xyXG4gICAgbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gIFxyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fY2FyZExpa2VBY3RpdmVTZWxlY3Rvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NhcmRMaWtlQWN0aXZlU2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQobmV3TGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbmV3TGlrZXNcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfVxyXG5cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkTGlrZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NhcmREZWxldGVTZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUJ1dHRvbih0aGlzLl9pZCkpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzLl9pZClcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldENhcmRFbGVtZW50ID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldENhcmRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ltYWdlRWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrVmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lmRm9ybVZhbGlkID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXHJcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLl9jaGVja0lmRm9ybVZhbGlkKCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnV0dG9uX3R5cGVfY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyBcclxuXHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIildXHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fVxyXG5cclxuICAgICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiIsIlxyXG4vLyBmb3Jtc1xyXG5leHBvcnQgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX3R5cGVfcHJvZmlsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2FkZC1jYXJkXCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX3R5cGVfYXZhdGFyXCIpO1xyXG5cclxuLy8gUG9wdXBzIElucHV0c1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfZGVzY3JpcHRpb25fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfZGVzY3JpcHRpb25fam9iXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9hdmF0YXJsaW5rXCIpO1xyXG5cclxuLy9CdXR0b25zXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2FkZFwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLXVwZGF0ZS1pY29uXCIpO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmJ1dHRvbl90eXBlX3N1Ym1pdFwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJidXR0b25fdHlwZV9zdWJtaXQtZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59XHJcblxyXG4iLCJpbXBvcnQgXCIuLi9wYWdlL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBlZGl0Rm9ybSxcclxuICBhZGRDYXJkRm9ybSxcclxuICBlZGl0QXZhdGFyRm9ybSxcclxuICBuYW1lSW5wdXQsXHJcbiAgam9iSW5wdXQsXHJcbiAgYXZhdGFySW5wdXQsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBhdmF0YXJFZGl0QnV0dG9uLFxyXG4gIHNldHRpbmdzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcblxyXG4vLy8vIFNldCBMb2FkaW5nIERhdGEgTWVzc2FnZSBmb3IgVVggLy8vL1xyXG5cclxuY29uc3Qgc2V0QnV0dG9uTWVzc2FnZSA9IChmb3JtLCBsb2FkaW5nTWVzc2FnZSkgPT4ge1xyXG4gIGZvcm0ucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9zdWJtaXRcIikudGV4dENvbnRlbnQgPSBsb2FkaW5nTWVzc2FnZTtcclxufVxyXG5cclxuLy8vLy8vICBDb25uZWN0aW9uIHdpdGggQVBJIC8vLy8vLy8vXHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImE2OGMwMTFkLWQyOTItNDU2Yy04NmMzLTUzZWViYzRhNzZiYVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLy8vLy8gQWRkIEludGlhbCBEYXRhIC8vLy8vXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHByb2ZpbGVKb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fam9iXCIsXHJcbiAgcHJvZmlsZUltYWdlU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXSlcclxuICAudGhlbigoW2NhcmREYXRhLCB1c2VyRGF0YV0pID0+IHtcclxuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxuICAgIGNhcmRzTGlzdC5yZW5kZXIoY2FyZERhdGEpO1xyXG5cclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgam9iOiB1c2VyRGF0YS5hYm91dCxcclxuICAgICAgYXZhdGFybGluazogdXNlckRhdGEuYXZhdGFyLFxyXG4gICAgfSk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGBFcnJvci4uLi4uOiAke2Vycn1gKSlcclxuXHJcbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcblxyXG4vLy8vLy8gQWRkIEludGlhbCBJbWFnZSAvLy8vL1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX3ByZXZpZXdcIik7XHJcbmNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoXCIucG9wdXBfdHlwZV9kZWxldGUtY2FyZFwiKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YSxcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgaW1hZ2VQb3B1cC5vcGVuKGRhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlQnV0dG9uOiAoaWQpID0+IHtcclxuICAgICAgICBjb25zdCBpc0FscmVhZHlMaWtlZCA9IGNhcmQuaXNMaWtlZCgpO1xyXG5cclxuICAgICAgICBpZiAoaXNBbHJlYWR5TGlrZWQpIHtcclxuICAgICAgICAgIGFwaS51bkxpa2VDYXJkKGlkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLmxpa2VDYXJkKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3IuLi4uLjogJHtlcnJ9YCkpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFwaS5saWtlQ2FyZChpZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5saWtlQ2FyZChyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coYEVycm9yLi4uLi46ICR7ZXJyfWApKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGhhbmRsZURlbGV0ZUNhcmQ6IChpZCkgPT4ge1xyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XHJcblxyXG4gICAgICAgIGNvbmZpcm1Nb2RhbC5zZXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoaWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xyXG4gICAgICAgICAgICBjb25maXJtTW9kYWwuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGBFcnJvci4uLi4uOiAke2Vycn1gKSlcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGNhcmRzVGVtcGxhdGVTZWxlY3RvcjogXCIjY2FyZHMtdGVtcGxhdGVcIixcclxuICAgICAgY2FyZFNlbGVjdG9yOiBcIi5jYXJkc19fY2FyZFwiLFxyXG4gICAgICBpbWFnZUVsU2VsZWN0b3I6IFwiLmNhcmRzX19pbWFnZVwiLFxyXG4gICAgICBjYXJkTGlrZVNlbGVjdG9yOiBcIi5idXR0b25fc3R5bGVfbGlrZVwiLFxyXG4gICAgICBjYXJkTGlrZUFjdGl2ZVNlbGVjdG9yOiBcImJ1dHRvbl9zdHlsZV9mdWxsXCIsXHJcbiAgICAgIGNhcmREZWxldGVTZWxlY3RvcjogXCIuYnV0dG9uX3R5cGVfZGVsZXRlXCIsXHJcbiAgICB9LFxyXG4gICAgdXNlcklkXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRDYXJkRWxlbWVudCgpO1xyXG59XHJcblxyXG4vLy8vIEhhbmRsZSBGb3JtIFN1Ym1pdCAvLy8vL1xyXG5cclxuY29uc3QgaGFuZGxlTmV3Q2FyZFN1Ym1pdCA9ICh7IG5hbWVJbnB1dDogbmFtZSwgbGlua0lucHV0OiBsaW5rIH0pID0+IHtcclxuICBzZXRCdXR0b25NZXNzYWdlKGFkZENhcmRGb3JtLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGkuYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZHNMaXN0LnByZXBlbmRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XHJcbiAgICAgIGFkZENhcmRNb2RhbC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coYEVycm9yLi4uLi46ICR7ZXJyfWApKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gc2V0QnV0dG9uTWVzc2FnZShhZGRDYXJkRm9ybSwgXCJDcmVhdGVcIikpO1xyXG59XHJcblxyXG5jb25zdCBoYW5kbGVFZGl0Rm9ybVN1Ym1pdCA9ICh7IG5hbWUsIGpvYjogYWJvdXQgfSkgPT4ge1xyXG4gIHNldEJ1dHRvbk1lc3NhZ2UoZWRpdEZvcm0sIFwiU2F2aW5nLi4uXCIpO1xyXG4gIGFwaS51cGRhdGVVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pXHJcbiAgICAudGhlbigodXNlcikgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWU6IHVzZXIubmFtZSwgam9iOiB1c2VyLmFib3V0LCBhdmF0YXJsaW5rOiB1c2VyLmF2YXRhciB9KTtcclxuICAgICAgZWRpdE1vZGFsLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3IuLi4uLjogJHtlcnJ9YCkpXHJcbiAgICAuZmluYWxseSgoKSA9PiBzZXRCdXR0b25NZXNzYWdlKGVkaXRGb3JtLCBcIlNhdmVcIikpO1xyXG59XHJcblxyXG5jb25zdCBoYW5kbGVFZGl0QXZhdGFyU3VibWl0ID0gKHsgYXZhdGFybGluazogYXZhdGFyIH0pID0+IHtcclxuICBzZXRCdXR0b25NZXNzYWdlKGVkaXRBdmF0YXJGb3JtLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGlcclxuICAgIC5lZGl0VXNlckF2YXRhcih7YXZhdGFyfSlcclxuICAgIC50aGVuKCh1c2VyKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXHJcbiAgICAgICAgam9iOiB1c2VyLmFib3V0LFxyXG4gICAgICAgIGF2YXRhcmxpbms6IHVzZXIuYXZhdGFyXHJcbiAgICAgIH0pO1xyXG4gICAgICBlZGl0QXZhdGFyTW9kYWwuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGBFcnJvci4uLi4uOiAke2Vycn1gKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHNldEJ1dHRvbk1lc3NhZ2UoZWRpdEF2YXRhckZvcm0sIFwiU2F2ZVwiKSk7XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRBdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwX3R5cGVfYXZhdGFyXCIsXHJcbiAgaGFuZGxlRWRpdEF2YXRhclN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgZWRpdE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXBfdHlwZV9wcm9maWxlXCIsXHJcbiAgaGFuZGxlRWRpdEZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIixcclxuICBoYW5kbGVOZXdDYXJkU3VibWl0XHJcbik7XHJcblxyXG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uZmlybU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5lZGl0QXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZWRpdEF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBlZGl0QXZhdGFyRm9ybSk7XHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGVkaXRGb3JtKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5cclxuZWRpdEF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRBdmF0YXJWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdEF2YXRhck1vZGFsLm9wZW4oKTtcclxuICBjb25zdCBkYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgYXZhdGFySW5wdXQudmFsdWUgPSBkYXRhLmF2YXRhcmxpbms7XHJcbn0pO1xyXG5cclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0TW9kYWwub3BlbigpO1xyXG4gIGNvbnN0IGRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBuYW1lSW5wdXQudmFsdWUgPSBkYXRhLm5hbWU7XHJcbiAgam9iSW5wdXQudmFsdWUgPSBkYXRhLmpvYjtcclxuIFxyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcbiAgX2NoZWNrUmVzU3RhdHVzID0gKHJlcykgPT4ge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcyA9ICgpID0+IHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNTdGF0dXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8gPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzU3RhdHVzKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJJbmZvID0gKGRhdGEpID0+IHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzU3RhdHVzKTsgIFxyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJBdmF0YXIgPSAoZGF0YSkgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc1N0YXR1cyk7ICBcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQgPSAoZGF0YSkgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNTdGF0dXMpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZCA9IChjYXJkSWQpID0+IHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNTdGF0dXMpO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQgPSAoY2FyZElkKSA9PiB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzU3RhdHVzKTtcclxuICB9XHJcblxyXG4gIHVuTGlrZUNhcmQgPSAoY2FyZElkKSA9PiB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzU3RhdHVzKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVKb2JTZWxlY3RvciwgcHJvZmlsZUltYWdlU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUltYWdlU2VsZWN0b3IpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgam9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LCBcclxuICAgICAgICAgICAgYXZhdGFybGluazogdGhpcy5fcHJvZmlsZUltYWdlLnNyY1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiwgYXZhdGFybGlua30pIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IGpvYjtcclxuICAgICAgICB0aGlzLl9wcm9maWxlSW1hZ2Uuc3JjID0gYXZhdGFybGluaztcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtczsgIFxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcihpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XHJcbiAgICB9XHJcbiAgXHJcbiAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH0gIFxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiOyAvLyBvbmNlIHdlIHdvcmsgd2l0aCB3ZWJwYWNrIHdlIGRvbid0IG5lZWQganNcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBcclxuICAgXHJcbiAgICBvcGVuKHtuYW1lLCBsaW5rfSkgeyBcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3ByZXZpZXctaW1hZ2VcIikuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy1pbWFnZVwiKS5hbHQgPSBuYW1lO1xyXG5cclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgc2V0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoU3VibWl0O1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJ1c2VySWQiLCJkYXRhIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VCdXR0b24iLCJ0aGlzIiwiX2VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJfbGlrZXMiLCJsZW5ndGgiLCJpc0xpa2VkIiwiX2NhcmRMaWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2NhcmRMaWtlQWN0aXZlU2VsZWN0b3IiLCJyZW1vdmUiLCJfZ2V0Q2FyZFRlbXBsYXRlIiwiX2ltYWdlRWxlbWVudCIsIl9pbWFnZUVsU2VsZWN0b3IiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsIl9saW5rIiwiX25hbWUiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJfb3duZXJJZCIsIl91c2VySWQiLCJfY2FyZERlbGV0ZUJ1dHRvbiIsImRpc3BsYXkiLCJfcmVuZGVyTGlrZXMiLCJuYW1lIiwibGluayIsImxpa2VzIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaWQiLCJfY2FyZFNlbGVjdG9yIiwiY2FyZFNlbGVjdG9yIiwiX2NhcmRMaWtlU2VsZWN0b3IiLCJjYXJkTGlrZVNlbGVjdG9yIiwiY2FyZExpa2VBY3RpdmVTZWxlY3RvciIsIl9jYXJkRGVsZXRlU2VsZWN0b3IiLCJjYXJkRGVsZXRlU2VsZWN0b3IiLCJpbWFnZUVsU2VsZWN0b3IiLCJvd25lciIsIl9jYXJkc1RlbXBsYXRlIiwiY2FyZHNUZW1wbGF0ZSIsIl9jYXJkc1RlbXBsYXRlU2VsZWN0b3IiLCJjYXJkc1RlbXBsYXRlU2VsZWN0b3IiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzb21lIiwicGVyc29uIiwicmVtb3ZlQ2FyZCIsImxpa2VDYXJkIiwibmV3TGlrZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2lucHV0RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0U2VsZWN0b3IiLCJmb3JFYWNoIiwiX2NoZWNrVmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJldmVyeSIsIl9jaGVja0lmRm9ybVZhbGlkIiwiX2J1dHRvbkVsZW1lbnQiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImtleSIsImNsb3NlIiwiX3BvcHVwRWxlbWVudCIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImVkaXRGb3JtIiwiYWRkQ2FyZEZvcm0iLCJlZGl0QXZhdGFyRm9ybSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiYXZhdGFySW5wdXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJhdmF0YXJFZGl0QnV0dG9uIiwic2V0QnV0dG9uTWVzc2FnZSIsImZvcm0iLCJsb2FkaW5nTWVzc2FnZSIsImFwaSIsIm9wdGlvbnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJfYmFzZVVybCIsImhlYWRlcnMiLCJfaGVhZGVycyIsInRoZW4iLCJfY2hlY2tSZXNTdGF0dXMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImJhc2VVcmwiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUpvYlNlbGVjdG9yIiwicHJvZmlsZUltYWdlU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsIl9wcm9maWxlSW1hZ2UiLCJnZXRVc2VySW5mbyIsImpvYiIsImF2YXRhcmxpbmsiLCJzcmMiLCJzZXRVc2VySW5mbyIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImNhcmREYXRhIiwidXNlckRhdGEiLCJjYXJkc0xpc3QiLCJyZW5kZXIiLCJhYm91dCIsImF2YXRhciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJwcmVwZW5kSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYWRkSXRlbSIsImFwcGVuZCIsImNyZWF0ZUNhcmQiLCJpbWFnZVBvcHVwIiwiYWx0IiwiY29uZmlybU1vZGFsIiwic2V0QWN0aW9uIiwiYWN0aW9uIiwiX2hhbmRsZVN1Ym1pdCIsImNhcmQiLCJ1bkxpa2VDYXJkIiwiZGVsZXRlQ2FyZCIsImdldENhcmRFbGVtZW50IiwiZWRpdEF2YXRhck1vZGFsIiwiZWRpdFVzZXJBdmF0YXIiLCJ1c2VyIiwiZmluYWxseSIsImVkaXRNb2RhbCIsInVwZGF0ZVVzZXJJbmZvIiwiYWRkQ2FyZE1vZGFsIiwibGlua0lucHV0IiwiYWRkTmV3Q2FyZCIsImVkaXRBdmF0YXJWYWxpZGF0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==