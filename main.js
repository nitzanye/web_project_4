!function(){"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class t{constructor(t,i,s){e(this,"_handleLikeButton",(()=>{this._cardLikeButton.classList.toggle(this._cardLikeActiveSelector)})),e(this,"_handleDeleteCard",(()=>this._element.remove())),e(this,"getCardElement",(()=>(this._element=this._getCardTemplate(),this._imageElement=this._element.querySelector(this._imageElSelector),this._imageElement.style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".cards__title").textContent=this._title,this._addEventListeners(),this._element))),this._title=t.title,this._link=t.link,this._handleCardClick=s,this._cardSelector=i.cardSelector,this._cardLikeSelector=i.cardLikeSelector,this._cardLikeActiveSelector=i.cardLikeActiveSelector,this._cardDeleteSelector=i.cardDeleteSelector,this._imageElSelector=i.imageElSelector,this._cardsTemplate=document.querySelector("#cards-template")}_getCardTemplate(){return this._cardsTemplate.content.querySelector(this._cardSelector).cloneNode(!0)}_addEventListeners(){this._cardLikeButton=this._element.querySelector(this._cardLikeSelector),this._cardDeleteButton=this._element.querySelector(this._cardDeleteSelector),this._cardLikeButton.addEventListener("click",this._handleLikeButton),this._cardDeleteButton.addEventListener("click",this._handleDeleteCard),this._imageElement.addEventListener("click",(()=>{this._handleCardClick(this._title,this._link)}))}}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class s{constructor(e,t){i(this,"_showInputError",((e,t)=>{const i=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),i.textContent=t,i.classList.add(this._errorClass)})),i(this,"_hideError",(e=>{const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)})),i(this,"_checkValidity",(e=>{e.validity.valid?this._hideError(e):this._showInputError(e,e.validationMessage)})),i(this,"_setEventListeners",(()=>{this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this._toggleButtonState()}))}))})),i(this,"_checkIfFormValid",(()=>this._inputElements.every((e=>e.validity.valid)))),i(this,"_toggleButtonState",(()=>{this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._checkIfFormValid()?(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1):(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0)})),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideError(e)}))}enableValidation(){this._formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}}class r{constructor(e){var t,i;i=e=>{e.preventDefault(),"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i,this._popupElement=document.querySelector(e)}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("button_type_close"))&&this.close()}))}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}}class o extends r{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t}_getInputValues(){const e=[...this._popupForm.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}const n=document.querySelector(".popup__form_type_profile"),l=document.querySelector(".popup__form_type_add-card"),a=document.querySelector(".popup__input_description_name"),c=document.querySelector(".popup__input_description_job"),p=document.querySelector(".button_type_edit"),_=document.querySelector(".button_type_add"),u={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".button_type_submit",inactiveButtonClass:"button_type_submit-disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},d=[{title:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{title:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}].reverse(),h=new class extends r{open(e,t){this._popupElement.querySelector(".popup__caption").textContent=e,this._popupElement.querySelector(".popup__preview-image").src=t,this._popupElement.querySelector(".popup__preview-image").alt=e,super.open()}}(".popup_type_preview"),m=e=>new t({title:e.title,link:e.link},{cardsTemplate:"#cards-template",cardSelector:".cards__card",imageElSelector:".cards__image",cardLikeSelector:".button_style_like",cardLikeActiveSelector:"button_style_full",cardDeleteSelector:".button_type_delete"},((e,t)=>{h.open(e,t)})),E=new class{constructor(e,t){let{items:i,renderer:s}=e;this._items=i,this._renderer=s,this._container=document.querySelector(t)}render(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:d,renderer:e=>{const t=m(e);E.addItem(t.getCardElement())}},".cards__list");E.render();const S=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:i}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(i)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{name:t,job:i}=e;this._profileName.textContent=t,this._profileJob.textContent=i}}({profileNameSelector:".profile__name",profileJobSelector:".profile__job"}),b=new o(".popup_type_profile",(e=>{S.setUserInfo(e)})),y=new o(".popup_type_add-card",(e=>{let{nameInput:t,linkInput:i}=e;const s=m({title:t,link:i});E.addItem(s.getCardElement())}));b.setEventListeners(),y.setEventListeners(),h.setEventListeners();const v=new s(u,n),f=new s(u,l);v.enableValidation(),f.enableValidation(),_.addEventListener("click",(()=>{f.resetValidation(),y.open()})),p.addEventListener("click",(()=>{v.resetValidation(),b.open();const e=S.getUserInfo();a.value=e.name,c.value=e.job}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFmLEtBQUVwQyxFQUFGLElBQVFtQyxHQUFPLEVBQ3ZCckksS0FBS2tJLGFBQWFwSCxZQUFjb0YsRUFDaENsRyxLQUFLbUksWUFBWXJILFlBQWN1SCxJSDJDVCxDQUM1Qkwsb0JBQXFCLGlCQUNyQkMsbUJBQW9CLGtCQUloQk0sRUFBWSxJQUFJOUMsRUFBYyx1QkFBd0I1RixJQUMxRGtJLEVBQVNPLFlBQVl6SSxNQUlqQjJJLEVBQWUsSUFBSS9DLEVBQ3ZCLHdCQUNBLElBQTJDLElBQXhDYyxVQUFXdEYsRUFBT3dILFVBQVd2SCxHQUFXLEVBQ3pDLE1BQU0yRyxFQUFPYixFQUFhLENBQUUvRixNQUFBQSxFQUFPQyxLQUFBQSxJQUVuQ2dHLEVBQVFRLFFBQVFHLEVBQUtDLHFCQUt6QlMsRUFBVXBELG9CQUNWcUQsRUFBYXJELG9CQUNiMEIsRUFBVzFCLG9CQUdYLE1BQU11RCxFQUFvQixJQUFJdEcsRUFBY3RDLEVBQVV1RyxHQUNoRHNDLEVBQXVCLElBQUl2RyxFQUFjdEMsRUFBVXdHLEdBR3pEb0MsRUFBa0JqRSxtQkFDbEJrRSxFQUFxQmxFLG1CQUdyQmlDLEVBQWN6RSxpQkFBaUIsU0FBUyxLQUN0QzBHLEVBQXFCbkUsa0JBQ3JCZ0UsRUFBYWxELFVBR2ZtQixFQUFrQnhFLGlCQUFpQixTQUFTLEtBQzFDeUcsRUFBa0JsRSxrQkFDbEIrRCxFQUFVakQsT0FDVixNQUFNekYsRUFBT2tJLEVBQVNLLGNBRXRCN0IsRUFBVUosTUFBUXRHLEVBQUtxRyxLQUN2Qk0sRUFBU0wsTUFBUXRHLEVBQUt3SSxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBzZXR0aW5ncywgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEudGl0bGU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG5cclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IHNldHRpbmdzLmNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NhcmRMaWtlU2VsZWN0b3IgPSBzZXR0aW5ncy5jYXJkTGlrZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fY2FyZExpa2VBY3RpdmVTZWxlY3RvciA9IHNldHRpbmdzLmNhcmRMaWtlQWN0aXZlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlU2VsZWN0b3IgPSBzZXR0aW5ncy5jYXJkRGVsZXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbWFnZUVsU2VsZWN0b3IgPSBzZXR0aW5ncy5pbWFnZUVsU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fY2FyZHNUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZHMtdGVtcGxhdGVcIik7IFxyXG5cclxuICB9XHJcblxyXG4gIF9nZXRDYXJkVGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZHNUZW1wbGF0ZS5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLl9jYXJkTGlrZUFjdGl2ZVNlbGVjdG9yKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCA9ICgpID0+IHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcblxyXG5cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkTGlrZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NhcmREZWxldGVTZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbik7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fdGl0bGUsIHRoaXMuX2xpbmspXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldENhcmRFbGVtZW50ID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldENhcmRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ltYWdlRWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcblxyXG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrVmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSWZGb3JtVmFsaWQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodGhpcy5fY2hlY2tJZkZvcm1WYWxpZCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnV0dG9uX3R5cGVfY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyBcclxuXHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIildXHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fVxyXG5cclxuICAgICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiIsIlxyXG4vLyBmb3Jtc1xyXG5leHBvcnQgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX3R5cGVfcHJvZmlsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2FkZC1jYXJkXCIpO1xyXG5cclxuLy8gUG9wdXBzXHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9kZXNjcmlwdGlvbl9uYW1lXCIpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9kZXNjcmlwdGlvbl9qb2JcIik7XHJcblxyXG5cclxuLy9CdXR0b25zXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2FkZFwiKTtcclxuXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5idXR0b25fdHlwZV9zdWJtaXRcIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnV0dG9uX3R5cGVfc3VibWl0LWRpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxuICB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHRpdGxlOiBcIkxhdGVtYXJcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHRpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICAgIH0sXHJcbiAgXS5yZXZlcnNlKCk7IiwiaW1wb3J0IFwiLi4vcGFnZS9pbmRleC5jc3NcIjtcclxuXHJcblxyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsIFxyXG4gIGVkaXRGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIG5hbWVJbnB1dCxcclxuICBqb2JJbnB1dCxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBhZGRDYXJkQnV0dG9uLFxyXG4gIHNldHRpbmdzXHJcbiAgXHJcbn1cclxuIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbiBcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX3ByZXZpZXdcIik7XHJcblxyXG5jb25zdCBnZW5lcmF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIHJldHVybiBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXHJcbiAgICAgIGxpbms6IGRhdGEubGluayxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGNhcmRzVGVtcGxhdGU6IFwiI2NhcmRzLXRlbXBsYXRlXCIsXHJcbiAgICAgIGNhcmRTZWxlY3RvcjogXCIuY2FyZHNfX2NhcmRcIixcclxuICAgICAgaW1hZ2VFbFNlbGVjdG9yOiBcIi5jYXJkc19faW1hZ2VcIixcclxuICAgICAgY2FyZExpa2VTZWxlY3RvcjogXCIuYnV0dG9uX3N0eWxlX2xpa2VcIixcclxuICAgICAgY2FyZExpa2VBY3RpdmVTZWxlY3RvcjogXCJidXR0b25fc3R5bGVfZnVsbFwiLFxyXG4gICAgICBjYXJkRGVsZXRlU2VsZWN0b3I6IFwiLmJ1dHRvbl90eXBlX2RlbGV0ZVwiLFxyXG4gICAgfSxcclxuICAgICh0aXRsZSwgbGluaykgPT4ge1xyXG4gICAgICBpbWFnZVBvcHVwLm9wZW4odGl0bGUsIGxpbmspO1xyXG4gICAgfVxyXG4gICk7XHJcbn07XHJcblxyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IGdlbmVyYXRlQ2FyZChkYXRhKTtcclxuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2V0Q2FyZEVsZW1lbnQoKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuY2FyZHNfX2xpc3RcIlxyXG4pO1xyXG5zZWN0aW9uLnJlbmRlcigpO1xyXG5cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgcHJvZmlsZUpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19qb2JcIixcclxufSk7XHJcblxyXG5cclxuY29uc3QgZWRpdE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9wcm9maWxlXCIsIChkYXRhKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIixcclxuICAoeyBuYW1lSW5wdXQ6IHRpdGxlLCBsaW5rSW5wdXQ6IGxpbmsgfSkgPT4ge1xyXG4gICAgY29uc3QgY2FyZCA9IGdlbmVyYXRlQ2FyZCh7IHRpdGxlLCBsaW5rIH0pO1xyXG5cclxuICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkLmdldENhcmRFbGVtZW50KCkpO1xyXG4gIH1cclxuKTtcclxuXHJcblxyXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuYWRkQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBlZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZENhcmRGb3JtKTtcclxuXHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcblxyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRNb2RhbC5vcGVuKCk7XHJcbiAgY29uc3QgZGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcblxyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IGRhdGEubmFtZTtcclxuICBqb2JJbnB1dC52YWx1ZSA9IGRhdGEuam9iO1xyXG59KTtcclxuXHJcblxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7IC8vIG9uY2Ugd2Ugd29yayB3aXRoIHdlYnBhY2sgd2UgZG9uJ3QgbmVlZCBqc1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIFxyXG4gICBcclxuICAgIG9wZW4odGl0bGUsIGxpbmspIHsgXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIikudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy1pbWFnZVwiKS5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wcmV2aWV3LWltYWdlXCIpLmFsdCA9IHRpdGxlO1xyXG5cclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXMgIFxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlclxyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy8gaW5zdGVhZCBvZiBzZXQgdGhpcyBtZXRob2Qgd2l0aCBjYXJkLCB3ZSBzZXQgaXQgd2l0aCBpdGVtXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaChkYXRhID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoZGF0YSk7XHJcbiAgICB9KTtcclxuICB9IFxyXG4gIFxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVKb2JTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVKb2JTZWxlY3Rvcik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBqb2I6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJzZXR0aW5ncyIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfY2FyZExpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2FyZExpa2VBY3RpdmVTZWxlY3RvciIsIl9lbGVtZW50IiwicmVtb3ZlIiwiX2dldENhcmRUZW1wbGF0ZSIsIl9pbWFnZUVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2ltYWdlRWxTZWxlY3RvciIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiX2xpbmsiLCJ0ZXh0Q29udGVudCIsIl90aXRsZSIsIl9hZGRFdmVudExpc3RlbmVycyIsInRpdGxlIiwibGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiY2FyZFNlbGVjdG9yIiwiX2NhcmRMaWtlU2VsZWN0b3IiLCJjYXJkTGlrZVNlbGVjdG9yIiwiY2FyZExpa2VBY3RpdmVTZWxlY3RvciIsIl9jYXJkRGVsZXRlU2VsZWN0b3IiLCJjYXJkRGVsZXRlU2VsZWN0b3IiLCJpbWFnZUVsU2VsZWN0b3IiLCJfY2FyZHNUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsImFkZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaW5wdXRFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaW5wdXRTZWxlY3RvciIsImZvckVhY2giLCJfY2hlY2tWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImV2ZXJ5IiwiX2J1dHRvbkVsZW1lbnQiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfY2hlY2tJZkZvcm1WYWxpZCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJyZXNldCIsImVkaXRGb3JtIiwiYWRkQ2FyZEZvcm0iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImluaXRpYWxDYXJkcyIsInJldmVyc2UiLCJpbWFnZVBvcHVwIiwic3JjIiwiYWx0IiwiZ2VuZXJhdGVDYXJkIiwiY2FyZHNUZW1wbGF0ZSIsInNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZCIsImdldENhcmRFbGVtZW50IiwidXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUpvYlNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiZWRpdE1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwibGlua0lucHV0IiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=